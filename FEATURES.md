# 功能详细说明

## 🎯 核心功能

### 1. 日历视图管理

#### 1.1 多视图模式

**月视图 (Month View)**
- 显示整月的手术排班概览
- 每天显示当天手术数量
- 点击日期查看当天详情

**周视图 (Week View)**
- 显示一周的详细时间安排
- 时间轴从 07:00 到 21:00
- 30分钟时间间隔
- 清晰展示每台手术的时间段

**日视图 (Day View)**
- 单日详细视图
- 更大的展示空间
- 适合查看单日密集排班

#### 1.2 事件交互

**点击事件**
- 单击：查看详情
- 双击空白：快速创建
- 选择时间段：创建并预填充时间

**拖拽功能**
- 拖拽排班卡片调整时间
- 实时冲突检测
- 拖拽结束自动保存
- 冲突时自动还原

**视觉反馈**
- 悬停高亮
- 今天标识
- 选择区域高亮
- 加载状态显示

### 2. 排班表单

#### 2.1 创建排班

**表单字段**
- 患者姓名（必填，最少2字符）
- 手术类型（必填，下拉选择）
- 主刀医生（必填，下拉选择）
- 助理医生（可选，多选）
- 手术室（必填，下拉选择）
- 开始时间（必填，日期时间选择器）
- 结束时间（必填，日期时间选择器）
- 状态（必填，下拉选择）
- 备注（可选，文本域）

**智能功能**
- 下拉选项动态加载
- 历史数据自动补全
- 预定义选项支持
- 自定义输入支持

**验证规则**
- 实时表单验证
- 字段必填检查
- 时间合理性验证
- 冲突自动检测

#### 2.2 编辑排班

**功能特性**
- 表单预填充现有数据
- 所有字段可编辑
- 编辑时排除自身冲突
- 删除按钮可用
- 删除前二次确认

**操作入口**
- 日历事件点击
- 列表视图编辑按钮
- 快捷键支持（规划中）

### 3. 筛选系统

#### 3.1 筛选条件

**日期范围**
- 开始日期选择
- 结束日期选择
- 日期范围选择器
- 快捷日期选项（规划中）

**医生筛选**
- 下拉选择主刀医生
- 支持搜索
- 显示所有历史医生

**手术室筛选**
- 下拉选择手术室
- 支持搜索
- 显示所有手术室

**状态筛选**
- 多选状态
- 颜色标识
- 支持全选/取消

**手术类型筛选**
- 下拉选择类型
- 支持搜索
- 显示所有类型

#### 3.2 筛选行为

**自动应用**
- 300ms 防抖
- 自动重新加载数据
- 保持分页状态

**组合筛选**
- 多条件 AND 逻辑
- 条件可任意组合
- 实时更新结果

**重置功能**
- 一键清空所有筛选
- 恢复默认视图
- 重新加载全部数据

#### 3.3 UI 优化

**折叠展开**
- 节省屏幕空间
- 状态记忆（规划中）
- 平滑动画

**响应式布局**
- 桌面端：横向排列
- 移动端：纵向堆叠
- 自动适应宽度

### 4. 列表视图

#### 4.1 表格功能

**数据展示**
- 患者姓名
- 手术类型
- 主刀医生
- 助理医生（如有）
- 手术室
- 开始时间
- 结束时间
- 状态标签

**交互功能**
- 排序（规划中）
- 分页
- 每页条数选择
- 数据导出（规划中）

**行操作**
- 编辑按钮
- 删除按钮
- 快捷菜单（规划中）

#### 4.2 分页系统

**配置选项**
- 10条/页
- 20条/页
- 50条/页
- 自定义条数（规划中）

**导航**
- 上一页/下一页
- 页码跳转
- 总数显示

### 5. 时间冲突检测

#### 5.1 检测规则

**同手术室冲突**
- 检测相同手术室
- 检测时间重叠
- 精确到分钟

**时间重叠判断**
```
冲突条件：
1. 新排班开始时间在已有排班时间段内
2. 新排班结束时间在已有排班时间段内
3. 新排班完全包含已有排班
```

**排除规则**
- 编辑时排除自身
- 不同手术室不冲突
- 不同日期不冲突

#### 5.2 检测时机

**创建时检测**
- 表单提交前
- 显示冲突详情
- 阻止保存

**编辑时检测**
- 表单提交前
- 排除自身
- 显示冲突详情

**拖拽时检测**
- 实时检测
- 即时反馈
- 自动还原

#### 5.3 冲突反馈

**提示信息**
- 明确的冲突描述
- 冲突的手术室
- 冲突的时间段
- 解决建议

**操作引导**
- 修改手术室
- 调整时间
- 取消操作

### 6. 数据管理

#### 6.1 数据存储

**localStorage**
- 客户端存储
- 自动持久化
- 即时保存

**数据结构**
```json
{
  "surgery_schedules": [
    {
      "id": "schedule_xxx",
      "patientName": "张三",
      "surgeryType": "阑尾切除术",
      "doctorName": "李医生",
      "assistantDoctors": ["王医生"],
      "operatingRoom": "手术室1",
      "startTime": "2024-01-01T09:00:00",
      "endTime": "2024-01-01T11:00:00",
      "status": "scheduled",
      "notes": "备注信息"
    }
  ]
}
```

#### 6.2 数据操作

**CRUD 操作**
- Create: 创建新排班
- Read: 读取排班列表
- Update: 更新排班信息
- Delete: 删除排班

**批量操作**（规划中）
- 批量导入
- 批量导出
- 批量删除
- 批量修改状态

#### 6.3 模拟数据

**自动生成**
- 首次启动自动生成
- 近两周排班数据
- 多样化场景覆盖

**数据特征**
- 8种手术类型
- 6位医生
- 5间手术室
- 4种状态
- 合理的时间分布

### 7. 状态管理

#### 7.1 排班状态

**已安排 (scheduled)**
- 颜色：蓝色 (#1890ff)
- 含义：手术已安排，等待执行
- 适用：未来的手术

**进行中 (in-progress)**
- 颜色：绿色 (#52c41a)
- 含义：手术正在进行
- 适用：当前正在执行的手术

**已完成 (completed)**
- 颜色：灰色 (#8c8c8c)
- 含义：手术已完成
- 适用：过去已完成的手术

**已取消 (cancelled)**
- 颜色：红色 (#f5222d)
- 含义：手术已取消
- 适用：取消的手术
- 样式：删除线

#### 7.2 状态转换

**允许的转换**
```
scheduled → in-progress → completed
scheduled → cancelled
in-progress → cancelled
```

**手动修改**
- 通过编辑表单修改
- 下拉选择状态
- 即时生效

### 8. UI/UX 特性

#### 8.1 响应式设计

**断点设置**
- 超大屏: ≥ 1920px
- 大屏: ≥ 1200px
- 中屏: ≥ 992px
- 小屏: ≥ 768px
- 超小屏: < 768px

**适配策略**
- 桌面端：完整功能
- 平板：优化布局
- 手机：简化操作

#### 8.2 动画效果

**过渡动画**
- 页面切换
- 弹窗显示
- 列表项进入
- 状态变化

**交互反馈**
- 按钮悬停
- 卡片悬停
- 加载状态
- 操作反馈

#### 8.3 主题定制

**颜色系统**
- 主色调：蓝色 (#1890ff)
- 成功色：绿色 (#52c41a)
- 警告色：橙色 (#faad14)
- 危险色：红色 (#f5222d)
- 中性色：灰色系

**可定制项**（规划中）
- 主题色
- 字体大小
- 组件圆角
- 阴影效果

## 🔮 规划功能

### 1. 高级筛选
- 自定义筛选条件
- 筛选方案保存
- 快速切换方案

### 2. 数据统计
- 医生工作量统计
- 手术室使用率
- 手术类型分布
- 状态统计图表

### 3. 导出功能
- Excel 导出
- PDF 导出
- 打印优化
- 邮件发送

### 4. 通知系统
- 排班变更通知
- 即将开始提醒
- 冲突警告
- 自定义提醒

### 5. 权限管理
- 用户角色
- 操作权限
- 数据权限
- 审批流程

### 6. 后端集成
- API 对接
- 实时同步
- 离线支持
- 数据备份

---

**持续更新中...** 🚀
